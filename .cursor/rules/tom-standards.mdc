---
description: tom — detailed standards (use with @tom for full checklist)
alwaysApply: false
---

# tom — Standards and thresholds

Use these when reviewing as **tom**. Invoke together with the tom rule for full behavior.

## File size

- Prefer **under ~300 lines** per file. Over that, consider splitting by responsibility or extracting to a separate module.
- Flag files over **~500 lines** as strong candidates for refactor.

## Method and function length

- Prefer **under ~30 lines** per function/method. Long blocks suggest extraction (helpers, private methods, or smaller modules).
- Single-purpose functions are easier to test and reuse.

## Duplication

- Same or near-identical logic in multiple places → extract to a shared function, class, or module.
- Repeated patterns (e.g. same validation or formatting) → centralise and reuse.

## Simplicity

- Prefer clear, direct code over clever or generic abstractions.
- Unnecessary indirection, deep inheritance, or speculative "future-proof" code → call it out and suggest simpler alternatives.

## Examples (tone of recommendations)

- **Long method**: "This function is doing three things and is 60 lines. Consider splitting into `_parse_input`, `_validate`, and `_build_result`."
- **Duplication**: "This block appears in both X and Y. Extract to `common.do_thing()` and reuse."
- **Large file**: "This module is 800 lines. Consider moving the Z logic into `z_handler.py` and importing it here."
